<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞–ø—á–∞</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>–í—ã–±–µ—Ä–∏ –≤—Å–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å <span class="highlight">–∫–æ—Ç–∞–º–∏ üê±</span></h2>
  <div class="grid" id="grid">
    <!-- –ö–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ–¥—Å—Ç–∞–≤—è—Ç—Å—è –∏–∑ JS -->
  </div>
  <button onclick="checkCaptcha()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>

  <script>
    const imageData = [
      { url: "https://placekitten.com/100/100", type: "cat" },
      { url: "https://placekitten.com/101/100", type: "cat" },
      { url: "https://placekitten.com/102/100", type: "cat" },
      { url: "https://random.imagecdn.app/100/100?1", type: "other" },
      { url: "https://random.imagecdn.app/100/100?2", type: "other" },
      { url: "https://random.imagecdn.app/100/100?3", type: "other" },
    ];

    const shuffled = imageData.sort(() => 0.5 - Math.random());
    const selected = new Set();

    const grid = document.getElementById("grid");
    shuffled.forEach((img, idx) => {
      const el = document.createElement("img");
      el.src = img.url;
      el.dataset.index = idx;
      el.classList.add("img");
      el.onclick = () => {
        if (selected.has(idx)) {
          selected.delete(idx);
          el.classList.remove("selected");
        } else {
          selected.add(idx);
          el.classList.add("selected");
        }
      };
      grid.appendChild(el);
    });

    function checkCaptcha() {
      let ok = true;
      shuffled.forEach((img, idx) => {
        if (img.type === "cat" && !selected.has(idx)) ok = false;
        if (img.type !== "cat" && selected.has(idx)) ok = false;
      });
      if (ok) {
        Telegram.WebApp.sendData("OK");
      } else {
        Telegram.WebApp.sendData("FAIL");
      }
    }
  </script>
</body>
</html>
